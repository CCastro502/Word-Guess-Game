<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Word Guess Game</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>

<body>
    <div class="container">
        <nav class="navbar navbar-dark bg-primary col-md-6 offset-md-3">
            <span class="navbar-brand mb-0 h1">Word Guessing Game</span>
        </nav>
        <div class="row">
            <div class="col-md-3 offset-md-3">
                <p id="directions-text">Type any letter to start playing</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-3 offset-md-3" id="directions">
                <div class="card">
                    <div class="card body">
                        <p id="userchoice-text"></p>
                        <p id="userguesslist-text"></p>
                    </div>
                </div>
            </div>
            <div class="col-md-3" id="winslosses">
                <div class="card" >
                    <div class="card body">
                        <p id="wins-text"></p>
                        <p id="losses-text"></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-3 offset-md-3">
                <p id="unscrambledword-text"></p>
                <p id="guessesLeft-text"></p>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        var userGuesses = [];
        var guessesLeft = 10;
        var wins = 0;
        var losses = 0;
        var ties = 0;
        var unknownWord = "";
        var typeCounter = 0;

        function wordGenerator() {
            var computerChoices = ["lowly", "start", "chilly", "bun", "bead", "friend", "return", "view", "cloth", "frogs", "celery", "basin", "stand", "special", "broad", "abaft", "plead", "quartz", "mark", "tempt", "shop", "stone", "scorch", "taboo", "hoax", "spiffy", "insure"];
            var cpuWord = computerChoices[Math.floor(Math.random() * computerChoices.length)];
            console.log(cpuWord);
            return cpuWord;
        };
        var computerWord = wordGenerator();

        function scrambledWord(string) {

            var knownWord = "_".repeat(string.length);
            var arr = [...knownWord];
            console.log(knownWord);
            return arr;

        }
        var unknownWord = scrambledWord(computerWord);

        var directionsText = document.getElementById("directions-text");
        var userChoiceText = document.getElementById("userchoice-text");
        var userGuessList = document.getElementById("userguesslist-text");
        var unscrambledWordText = document.getElementById("unscrambledword-text");
        var guessesLeftText = document.getElementById("guessesLeft-text")
        var winsText = document.getElementById("wins-text");
        var lossesText = document.getElementById("losses-text");

        document.onkeyup = function (event) {

            var userGuess = event.key;
            var userKeyCode = event.keyCode;
            console.log("KeyCode = " + userKeyCode);

            if (userKeyCode > 57 && userKeyCode < 91) {
                userGuesses.push(userGuess);
                directionsText.textContent = "";

                wordChecker(userGuess);
                userChoiceText.textContent = "You chose: " + userGuess;
                userGuessList.textContent = "You have guessed: " + userGuesses;
                unscrambledWordText.textContent = "The word is: " + unknownWord;
                guessesLeft.textContent = "# of guesses left: " + guessesLeft
                winsText.textContent = "Wins: " + wins;
                lossesText.textContent = "Losses: " + losses;
                typeCounter++;
                console.log(typeCounter);
                guessesLeft--;
                console.log(guessesLeft);
            } else {
                alert("You did not enter an alphabetical character.")
            }
        };

        function wordChecker(userGuess) {
            if (computerWord.includes(userGuess)) {
                alert("You guessed a correct character");
            } else {
                alert("You guessed an incorrect character")
            }
            unscrambledWord(unknownWord, computerWord, userGuess);
        }

        function unscrambledWord(unknownWord, word, userGuess) {
            for (i = 0; i < word.length; i++) {
                if (userGuess === word[i]) {
                    // unscrambledWordText.textContent = "The word is: " + unknownWord;
                    // winsText.textContent = "Wins: " + wins;
                    // lossesText.textContent = "Losses: " + losses;
                    unknownWord.splice(i, 1, word[i]);

                }
            } checkGame(unknownWord, word);
        }

        unscrambledWordText.textContent = "The word is: " + unknownWord;

        function checkGame(unknownWord, word) {

            if (guessesLeft === 0) {
                alert("You lost!!! New game started");
                computerWord = wordGenerator();
                unknownWord.length = 0;
                unknownWord = scrambledWord(computerWord);
                userGuesses = [];
                losses++;
                guessesLeft = 10;
            }
            for (q = 0; q < word.length; q++) {
                var userWin = true;
                if (word[q] !== unknownWord[q]) {
                    var userWin = false;
                }
            } if (userWin === true) {
                computerWord = wordGenerator();
                unknownWord.length = 0;
                unknownWord = scrambledWord(computerWord);
                userGuesses = [];
                wins++;
                alert("You've won!!! New game started");
                guessesLeft = 10;
                return true;
            }
        }

        console.log(checkGame(["_", "_", "_", "l", "l", "_"], ["c", "h", "i", "l", "l", "y"]));


    </script>

</body>

</html>